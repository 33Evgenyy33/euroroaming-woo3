jQuery(document).ready(function(a){function c(){var b=a("#affiliate-wp-migrate-user-accounts input:checkbox:checked").length,c=a("#affiliate-wp-migrate-user-accounts input[type=submit]");b>0?c.prop("disabled",!1):c.prop("disabled",!0)}var b;window.formfield="",a("body").on("click",".affwp_settings_upload_button",function(c){c.preventDefault();var d=a(this);return window.formfield=a(this).parent().prev(),b?void b.open():(b=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:d.data("uploader_title"),button:{text:d.data("uploader_button_text")},multiple:!1}),b.on("menu:render:default",function(a){var b={};a.unset("library-separator"),a.unset("gallery"),a.unset("featured-image"),a.unset("embed"),a.set(b)}),b.on("insert",function(){var a=b.state().get("selection");a.each(function(a,b){a=a.toJSON(),window.formfield.val(a.url)})}),void b.open())});var b;window.formfield="",a(".affwp-referrals-export-toggle").click(function(){a(".affwp-referrals-export-toggle").toggle(),a("#affwp-referrals-export-form").slideToggle()}),a("#affwp-referrals-export-form").submit(function(){if(!confirm(affwp_vars.confirm))return!1}),a(".affwp-datepicker").length&&a(".affwp-datepicker").datepicker({dateFormat:"mm/dd/yy"}),a(".affwp-user-search").each(function(){var b=a(this),c="affwp_search_users",d=b.val(),e=b.data("affwp-status"),f=a("#user_id");b.autocomplete({source:ajaxurl+"?action="+c+"&term="+d+"&status="+e,delay:500,minLength:2,position:{offset:"0, -1"},select:function(a,b){f.val(b.item.user_id)},open:function(){b.addClass("open")},close:function(){b.removeClass("open")}}),b.on("keyup",function(){this.value||f.val("")})});var b;a("body").on("click",".upload_image_button",function(c){c.preventDefault();var d=a(this).prev();return b?void b.open():(b=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}}),b.on("menu:render:default",function(a){var b={};a.unset("library-separator"),a.unset("gallery"),a.unset("featured-image"),a.unset("embed"),a.set(b)}),b.on("select",function(){var c=b.state().get("selection").first().toJSON();d.val(c.url);var e=a("<img />");e.attr("src",c.url),a("#preview_image").empty().append(e),a("#preview_image img")&&a("#preview_image").show()}),void b.open())}),a("body").on("click",".affiliates_page_affiliate-wp-referrals .delete",function(a){return!!confirm(affwp_vars.confirm_delete_referral)}),c(),a("body").on("change","#affiliate-wp-migrate-user-accounts input:checkbox",function(){c()}),a("#affwp_add_affiliate #status").change(function(){var b=a(this).val();"active"==b?a("#affwp-welcome-email-row").show():(a("#affwp-welcome-email-row").hide(),a("#affwp-welcome-email-row #welcome_email").prop("checked",!1))}),"undefined"!=typeof postboxes&&postboxes.add_postbox_toggles(pagenow)});
(function(){jQuery(document).ready(function(a){"use strict";var b;return b=a(' form[name="checkout"]'),a('form[name="checkout"]').attr("id","checkout").addClass("dropzone"),b.find(":input.select").each(function(b){var c,d;return d=a(this).closest(".form-row").hasClass("validate-required"),"function"==typeof(c=a(this)).select2&&c.select2({allowClear:!d,placeholder:a(this).attr("multiple")?wc_checkout_add_ons.select_placeholder_multi:wc_checkout_add_ons.select_placeholder_single}),a().select2}),a(function(){return a("#wc_checkout_add_ons *").on("change",function(b){return a('input[type="file"]').each(function(b){var c;if(c=a(this).val())return a(this).next().val("1")}),a("body").trigger("update_checkout")}),a("#wc_checkout_add_ons .input-file-plupload").each(function(b){var c,d,e,f,g,h,i,j,k;return h=a(this),c=h.find(".dropzone"),f=h.find(".preview"),g=h.find(".progress"),d=h.find(".feedback"),e=h.find('input[type="hidden"]'),i=h.parents(".form-row").prop("id"),j={url:wc_checkout_add_ons.ajax_url,multipart_params:{action:"wc_checkout_add_on_upload_file",security:wc_checkout_add_ons.upload_nonce,field:i},browse_button:c[0],drop_element:c[0],multi_selection:wc_checkout_add_ons.max_files>1,filters:{max_file_size:wc_checkout_add_ons.max_file_size,mime_types:wc_checkout_add_ons.mime_types}},k=new plupload.Uploader(j),k.init(),k.bind("Error",function(a,b){return d.html("\nError #"+b.code+": "+b.message).removeClass("hide"),g.addClass("hide")}),k.bind("FilesAdded",function(a,b){return d.html("").addClass("hide"),c.addClass("disabled"),g.removeClass("hide"),k.start()}),k.bind("UploadProgress",function(a,b){return g.find(".bar").css("width",b.percent+"%")}),k.bind("FileUploaded",function(b,i,j){var k;return k=a.parseJSON(j.response),k.errors?(d.html(k.errors.upload_error).removeClass("hide"),g.addClass("hide"),void c.removeClass("disabled")):(e.val(k.id).trigger("change"),f.removeClass("hide").find("a.file").prop("href",k.url).text(k.title),c.addClass("hide").removeClass("disabled"),g.addClass("hide").find(".bar").css("width",0),h.find(".moxie-shim").addClass("hide"))}),h.find("a.remove-file").on("click",function(b){return b.preventDefault(),f.addClass("hide"),c.removeClass("hide disabled"),a.ajax({type:"POST",url:wc_checkout_add_ons.ajax_url,data:{action:"wc_checkout_add_on_remove_file",security:wc_checkout_add_ons.remove_nonce,file:e.val()}}),e.val("").trigger("change"),h.find(".moxie-shim").removeClass("hide")})})})})}).call(this);
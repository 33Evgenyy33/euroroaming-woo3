(function(){"use strict";jQuery(function(a){var b,c,d,e,f;if(a(".tips, .help_tip, .woocommerce-help-tip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200}),"wc_order_status"!==pagenow&&"edit-wc_order_status"!==pagenow||(a.extend(!0,a.magnificPopup.defaults,{tClose:wc_order_status_manager.i18n.close}),c=a("#reassign-order-status"),b=a("#reassign-order-status-popup"),c.magnificPopup({inline:!0,callbacks:{open:function(a){return b.show()},close:function(a){return b.hide()}}}),a("a.submitdelete").on("click",function(d){var e,f,g,h,i;if(d.preventDefault(),i=this,"wc_order_status"===pagenow?(g=a("#post_ID").val(),h=a("#post_name").val()):(f=a(this).closest("tr").attr("id"),g=f.substr(5),h=a(this).closest("tr").find("td.column-slug").text()),g)return e={action:"wc_order_status_manager_can_safely_delete_order_status",security:wc_order_status_manager.delete_order_status_nonce,status:g},a.post(wc_order_status_manager.ajax_url,e,function(d){var f,g,j,k;return d.success?window.location=a(i).attr("href"):(b.find(".order-status-link").attr("href",d.data.orders_link),b.find(".order-status-count").text(d.data.orders_count),b.find(".order-status-name").text(d.data.status_name),j=b.find(".singular"),f=b.find(".plural"),1===d.data.orders_count?(j.show(),f.hide()):(j.hide(),f.show()),g=b.find("select"),k="",g.html(" "),a.each(wc_order_status_manager.order_statuses,function(a,b){if(a!==h)return k+='<option value="'+a+'">'+b+"</option>"}),b.find("select").html(k),c.trigger("click"),b.removeClass("mfp-hide"),b.find("button").on("click",function(c){return a(this).hasClass("reassign")?(e={action:"wc_order_status_manager_bulk_reassign_order_status",security:wc_order_status_manager.bulk_reassign_order_status_nonce,old_status:d.data.status_name,new_status:b.find("select").val()},a.post(wc_order_status_manager.ajax_url,e,function(b){return window.location=a(i).attr("href")})):a(this).hasClass("delete")?window.location=a(i).attr("href"):void 0}))})})),"edit-wc_order_status"===pagenow&&(d=a("#the-list"),d.sortable({placeholder:"ui-state-highlight",stop:function(b,c){var d,e;return e=[],a("#the-list > tr ").each(function(){return e.push(a(this).find("td.slug").text())}),d={action:"wc_order_status_manager_sort_order_statuses",security:wc_order_status_manager.sort_order_statuses_nonce,statuses:e},a.post(wc_order_status_manager.ajax_url,d,function(a){})}}),d.disableSelection(),a("#import-custom-statuses").on("click",function(b){var c;return b.preventDefault(),c={action:"wc_order_status_manager_import_custom_order_statuses",security:wc_order_status_manager.import_custom_order_statuses_nonce},a.post(wc_order_status_manager.ajax_url,c,function(a){return location.reload()})})),"wc_order_status"===pagenow&&(a("#_next_statuses").select2(),a("#_color").wpColorPicker({change:function(b,c){return a("._icon_field .selected-icon").css("color",c.color.toString())}}),a(document).mousedown(function(b){if(!a(b.target).parents(".wp-picker-holder")&&!a(b.target).parents("mark"))return a(".wp-picker-holder").each(function(){return a(this).fadeOut()})}),f=function(b,c){return a(b).siblings("select").val(""),a(b).siblings(".icons-selector").find(".selected-icon i").removeClass().css("background-image","url("+c+")")},a("#_icon, #_action_icon").each(function(){var b;return a(this).fontIconPicker({allCategoryText:wc_order_status_manager.i18n.all_icon_packages,source:wc_order_status_manager.icon_options}),a(this).on("change",function(b){if(a(this).val())return a(this).siblings(".icons-selector").find(".selected-icon i").css("background-image","")}),b=a(this).data("icon-image"),b&&f(this,b),a(this).siblings(".upload-icon").detach().insertAfter(a(this).siblings(".icons-selector").find(".selector"))}),a(".icons-selector .selector-button").attr("title",wc_order_status_manager.i18n.select_icon),a(".icons-search-input").attr("placeholder",wc_order_status_manager.i18n.search_icons),a("._icon_field .selected-icon").css("color",a("#_color").val()),e={},a(".upload-icon").on("click",function(b){var c,d;return b.preventDefault(),d=this,c=a(this).attr("href"),e[c]?e[c].open():(e[c]=wp.media.frames["file_frame_"+c]=wp.media({title:wc_order_status_manager.i18n.choose_file,button:{text:a(this).data("uploader-button-text")},multiple:!1}),e[c].on("select",function(b){var d;return d=e[c].state().get("selection").first().toJSON(),a(c).val(d.id),a(c).siblings(".icons-selector").find(".selected-icon i").css("background-image","").removeClass().addClass("fa fa-refresh fa-spin"),a.get(wc_order_status_manager.ajax_url,{attachment_id:d.id,action:"wc_order_status_manager_get_icon_image_url"},function(a){if(a.indexOf("http")!==-1)return f(c,a)})}),e[c].open())})),"wc_order_email"===pagenow)return a(".dispatch_conditions").on("click",".remove-condition",function(b){if(window.confirm(wc_order_status_manager.i18n.remove_this_condition)&&(a(b.target).parents("tr").remove(),!a(".dispatch_conditions tbody").children().length))return a(".dispatch_conditions tbody, .dispatch_conditions thead").hide()}),a(".dispatch_conditions").on("click",".add-condition",function(b){var c,d;return c=a(".dispatch_conditions tr.condition").length,d='<option value="any">'+wc_order_status_manager.i18n.any+"</option>",a.each(wc_order_status_manager.order_statuses,function(a,b){return d+='<option value="'+a+'">'+b+"</option>"}),a(".dispatch_conditions thead").show(),a(".dispatch_conditions tbody").show().append('<tr class="condition"><td><select name="_email_dispatch_condition['+c+'][from]">'+d+'</select></td><td><select name="_email_dispatch_condition['+c+'][to]">'+d+'</select></td><td><button type="button" class="button remove-condition">'+wc_order_status_manager.i18n.remove+"</button></td></tr>")})})}).call(this);
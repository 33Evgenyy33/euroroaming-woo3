jQuery(document).ready(function(e){function t(){var t=e("#affiliate-wp-migrate-user-accounts input:checkbox:checked").length,a=e("#affiliate-wp-migrate-user-accounts input[type=submit]");t>0?a.prop("disabled",!1):a.prop("disabled",!0)}window.formfield="",e("body").on("click",".affwp_settings_upload_button",function(t){t.preventDefault();var o=e(this);window.formfield=e(this).parent().prev(),a?a.open():((a=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:o.data("uploader_title"),button:{text:o.data("uploader_button_text")},multiple:!1})).on("menu:render:default",function(e){var t={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(t)}),a.on("insert",function(){a.state().get("selection").each(function(e,t){e=e.toJSON(),window.formfield.val(e.url)})}),a.open())});window.formfield="",e(".affwp-referrals-export-toggle").click(function(){e(".affwp-referrals-export-toggle").toggle(),e("#affwp-referrals-export-form").slideToggle()}),e(".affwp-datepicker").length&&e(".affwp-datepicker").datepicker({dateFormat:"mm/dd/yy"}),e(".affwp-user-search").each(function(){var t=e(this),a=t.val(),o=t.data("affwp-status");t.autocomplete({source:ajaxurl+"?action=affwp_search_users&term="+a+"&status="+o,delay:500,minLength:2,position:{offset:"0, -1"},open:function(){t.addClass("open")},close:function(){t.removeClass("open")}})});var a;e("body").on("click",".upload_image_button",function(t){t.preventDefault();var o=e(this).prev();a?a.open():((a=wp.media.frames.file_frame=wp.media({frame:"select",title:"Choose Image",multiple:!1,library:{type:"image"},button:{text:"Use Image"}})).on("menu:render:default",function(e){var t={};e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set(t)}),a.on("select",function(){var t=a.state().get("selection").first().toJSON();o.val(t.url);var i=e("<img />");i.attr("src",t.url),e("#preview_image").empty().append(i),e("#preview_image img")&&e("#preview_image").show()}),a.open())}),e("body").on("click",".affiliates_page_affiliate-wp-referrals .delete",function(e){return!!confirm(affwp_vars.confirm_delete_referral)}),t(),e("body").on("change","#affiliate-wp-migrate-user-accounts input:checkbox",function(){t()}),e("#affwp_add_affiliate #status").change(function(){"active"==e(this).val()?e("#affwp-welcome-email-row").show():(e("#affwp-welcome-email-row").hide(),e("#affwp-welcome-email-row #welcome_email").prop("checked",!1))}),"undefined"!=typeof postboxes&&/affiliate-wp/.test(pagenow)&&postboxes.add_postbox_toggles(pagenow)});